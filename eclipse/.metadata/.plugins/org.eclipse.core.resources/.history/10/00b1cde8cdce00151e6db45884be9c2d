package me.diabolicatrix.events;

import me.diabolicatrix.gui.GuiSideSelection;
import me.diabolicatrix.proxy.ClientProxy;
import net.minecraft.client.Minecraft;
import net.minecraft.entity.DataWatcher;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraftforge.event.entity.EntityEvent.EntityConstructing;
import net.minecraftforge.event.entity.living.LivingDeathEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.PlayerEvent.PlayerLoggedInEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;

public class PlayerEventHandler
{

    @SubscribeEvent
    public void onPlayerLogin(PlayerLoggedInEvent event)
    {
        if(event.player != null)
        {
            ClientProxy.setLoaded(false);
        }
    }
    
    @SubscribeEvent
    public void onPlayerDeath(LivingDeathEvent event)
    {
        if(event.entity != null && event.entity instanceof EntityPlayer)
        {
            System.out.println("TTTTTTTTTTT");
        }
    }
    
    @SubscribeEvent
    public void onPlayerLoginTick(TickEvent.PlayerTickEvent event)
    {
        if(event.player != null)
        {
            //DataWatcher dw = event.player.getDataWatcher();
            //System.out.println(dw.getWatchableObjectInt(25));
        }
        if(event.player != null && !ClientProxy.isLoaded())
        {
            if(!(Minecraft.getMinecraft().currentScreen instanceof GuiSideSelection))
            {
                Minecraft.getMinecraft().displayGuiScreen(new GuiSideSelection(event.player));
                System.out.println("Gui Opened!");
            }
        }
    }
    
}
